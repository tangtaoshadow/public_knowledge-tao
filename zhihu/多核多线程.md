# 多核多线程



**Author：**[杭州电子科技大学](http://www.hdu.edu.cn/)  `2016级 唐涛` [16011324@hdu.edu.cn](mailto:16011324@hdu.edu.cn)

**CreateTime：**`2019-10-7 11:28:57`

**UpdateTime：**`2019-10-7 12:37:51`

**Copyright:**  唐涛 2019 ©  [HOME](https://www.promiselee.cn/tao) 

**Email：**[tangtao2099@outlook.com](mailto:tangtao2099@outlook.com)

**Link：**  [知乎](https://www.zhihu.com/people/tang-tao-24-36/activities)  [GitHub](https://github.com/tangtaoshadow) [Gitee](https://gitee.com/tangtao_2099)





---

# **核心和线程之间有什么区别？**

我们将核心视为一个人的嘴巴，将线程视为手，那么嘴巴可以吃所有的东西，而双手则可以帮助组织“工作量”。多线程有助于将工作负载更有效地交付给CPU，而更多线程将转化为组织更好的工作队列，从而提高了信息处理效率。

由于每个制造商的采用不同的技术，所以存在很多混乱。CPU核心是指实际的硬件组件，而线程则是指管理任务的虚拟组件。关于CPU与多个线程的交互方式，有很多不同的变化。基本上，CPU从线程中馈送任务，仅当第一个线程发送的信息缓慢或不可靠（例如缓存未命中）时，它才访问第二个线程。

**多线程和超线程是稍微不同的概念**

超线程是一项仅适用于`Intel`处理器的技术，尽管仍然是多线程，但它仍然可以更有效地使用线程。话虽这么说，`AMD`内核（即新的`Ryzen`产品线）通过添加更多物理内核来解决此问题，无需使用该技术即可提供可比的结果。



#### **多线程和超线程以及高速缓存未命中**

高速缓存未命中是处理器尝试读取CPU高速缓存中加载的内存的尝试，如果处理器出现故障，则它必须访问不同类型的内存模块（例如RAM或永久性存储）中的信息，这就会导致延迟，这肯定会阻碍你**CPU**的性能。运行两个并行线程可以使处理器获取在并行线程中调度的信息，从而最大程度地减少空闲时间。无论你运行哪种类型的应用程序，这都可以提高性能，因此可以全面提高性能。



#### **什么是超线程**

超线程于2002年首次亮相，是**Intel**尝试将并行计算带给消费者的尝试。这虽然有点花哨(ﾉ´▽｀)ﾉ♪，因为**OS**会将线程识别为单独的**CPU**内核。当你运行Intel芯片时，你的任务管理器将为你显示双倍的内核数量。这将允许它们共享信息，并通过在内核之间共享资源来加快解码过程。英特尔声称，这项技术可以使性能提高30％。





# CPU内核和线程如何工作？

CPU的核心是硬件，他们负责所有繁重的工作。而线程用于帮助CPU更有效地安排其任务，如果CPU没有超线程或多线程，则任务的调度效率将降低，从而导致其超时工作访问某些应用程序有关的信息。

一个核心一次可以完成一项任务，那么多核可帮助你更顺畅地运行不同的应用程序。例如，如果你打算运行视频游戏，则将需要多个核心来运行游戏，而其他核心可以运行后台应用程序，例如运行Skype，Onedrive，Chrome或你可能正在运行的任何其他应用程序。

#### 多线程会使处理效率更高

当然，这将转化为更好的性能，这也将导致处理器消耗更多功率，但是芯片上已经启用了多线程，因此无需担心。虽然它消耗的功率更多，但这很少会导致温度升高。

简而言之，当你考虑升级时，取决于正在运行的应用程序，更多的线程等于更高的性能或更好的多任务处理。如果你一次运行多个软件，那么它肯定会转化为更高的性能**٩(๑❛ᴗ❛๑)۶٩(๑❛ᴗ❛๑)۶**。如果你对游戏情有独钟，那么多线程可能会产生更好的结果，但只有非常特殊的情况才可以。





# 游戏时的核心与线程

游戏时，核心将永远更加重要。因为游戏本身并不是处理器的繁重任务，根据处理器的缓存和时钟速度，即使是现代游戏也可以在四核，四线程CPU上流畅运行。

当你运行多个任务时，线程实际上很有用。假设你正在玩游戏，并且打算进行流媒体播放。多线程或超线程处理器将帮助你以可播放的帧速率(至少25)运行游戏，同时还处理与录制/流媒体相关的所有编码任务。

如果你打算录制游戏录像并将其上传到`bilibili.com`或`Youtube.com`等网站时，则更多的线程可以帮助处理器运行2D视频处理软件（例如Adobe Premiere，OBS，After Effects），因此你就需要使用更多的线程，如果你打算使用录制的游戏画面，那么具有超线程功能的处理器就很有意义。

话虽如此，我们在游戏领域已经达到了十字路口。AAAA开发人员不断突破PC当前功能的界限，并继续设计`CPU`强度更高的游戏。更雄心勃勃的游戏设计意味着游戏将更加耗费资源且优化程度较低。对于电子竞技游戏（例如《守望先锋》和《英雄联盟》）并没有真正利用多线程的优势，而单人游戏越来越雄心勃勃。





# 最终采取方案

基本上，更多的内核和更多的线程将始终意味着更好的性能。一些面向生产力的软件（例如视频编辑）将从多个线程中受益，而只有某些游戏会利用这些功能。

如果你的工作量涉及诸如视频编辑之类的繁重任务，那么多线程处理器对于你来说是必须的。英特尔和AMD都提供了大量的多核，多线程，消费者级别的处理器。Ryzen产品线更注重价值，而英特尔则拥有旗舰芯片，即i9。

对于游戏，你可能会获得具有八线程四核的稳定60帧以上的帧。不够如果你打算流式传输或录制游戏画面，那么如果你不能投资专用的系统，而更应该考虑升级到六核或八核处理器。







---

# 下面来比较一下Intel与AMD



对于台式机或笔记本电脑的处理器，AMD和Intel是你真正需要知道的仅有的两个名称。这两家公司合在一起控制着超过99％的个人计算机CPU市场。尽管英特尔无疑是两家公司中规模更大的公司，但AMD继续与芯片巨人争夺CPU市场的吹牛争利。竞争似乎对企业和消费者都有利，因为它迫使两家公司都开发更快，更高效的处理器产品，同时这还意味着公司可以更快地完成更多工作。英特尔基于i7和i9内核的最新移动和台式机CPU产品以及AMD类似设计的Vision处理器均提供多合一的CPU和图形集成，以提高个人计算机的性能。



## 核心与线程

AMD Vision和Intel i7系列处理器均提供多个CPU内核，内核本质上是CPU内的小处理器，它们可以使PC可以多线程或以并行方式执行计算和操作。根据型号，AMD Vision处理器可能具有四个，六个或八个核心。而英特尔i7 CPU四个核心也包含称为超线程的技术，该技术可为多线程或并行操作创建额外的虚拟处理器线程。超线程技术是英特尔处理器所独有的，AMD并未将其纳入其CPU中。尽管英特尔的超线程技术确实通过使虚拟处理器数量增加一倍来提高性能，但只有在以下情况下，你才会注意到速度的提高：使用都支持虚拟处理器线程的操作系统和应用程序，尽管Windows的所有现代版本均支持超线程，但许多替代操作系统均不支持。



## 高速缓存存储器

为了提高处理器的性能，AMD和英特尔都开始包括各种数量的缓存，以帮助通过管道将数据更快地处理和推送到应用程序。一般来说，处理器中的高速缓存内存越大，其执行速度就越快。



## 缓存比较

大多数i7系列核心处理器至少具有8MB的缓存，而基于`Vision`的低端处理器可能只有2MB。两个系列的处理器的缓存量因型号而略有不同，但是Intel处理器通常具有更好的缓存与核心比率。`Intel`处理器为每个核心提供了更多的高速缓存。因此，他们的内核可以更高效地工作。他们不必频繁地往返硬盘发送请求的数据。



## 综合视频差异

尽管 **Intel** 系列的处理器在纯CPU性能方面比AMD处理器略有优势，但Vision系列处理器具有高端集成GPU。英特尔i7处理器使用该公司的`HD 5000`等集成图形芯片组，并将其图形芯片组更多地设计用于多显示器使用和视频编码。而基于AMD Vision的CPU使用ATI创建的高清芯片组，ATI芯片组通常提供比Intel处理器更好的3D和游戏性能。AMD在2006年购买了ATI，专门用于满足需要高端图形性能的用户。



## 无形资产

当你考虑物有所值时，你应该必须计算所有内容。AMD的优势在于包括了具有流行功能（如RGB）的体面散热器，英特尔的风扇等通常不包含在任何高端部件中。

**需要考虑的另一部分是CPU投入的主板成本**

就其本身而言，英特尔在集成显卡上进行视频编码或解码的应用程序中继续保持领先地位。英特尔称为GPU的专用硬件最终称为**QuickSync**，最终成为了不容忽视的功能。

总的来说，很明显AMD仍然在多线程价值方面处于领先地位。but，当你仅关注单线程值时，竞争会更加紧密。







---

# 定价和预期用途

如果你需要价格合理的而且多合一的解决方案，以提供相当快的性能和更好的游戏图形，请选择一种**AMD Vision**系列处理器。为了发挥极致的游戏性能，将**Intel CPU**与离散ATI或`NVidia`视频卡配合使用将为你带来两全其美的体验：**更快的时钟周期和出色的图形性能**。but，请记住，英特尔系统的处理器的价格比**AMD**同类产品高得多。





## [原文链接](https://github.com/taoshadow/public_knowledge-tao/blob/master/zhihu/%E5%A4%9A%E6%A0%B8%E5%A4%9A%E7%BA%BF%E7%A8%8B.md)